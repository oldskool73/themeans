/**
 * themeans-core - 
 * @version v0.2.0 - 2015-06-12
 * @link 
 * @license 
 */
"use strict";angular.module("tm.ionic-parse-places-autosuggest",["uiGmapgoogle-maps","tm.parse","ionic"]).config(["$provide","uiGmapGoogleMapApiProvider",function(a,b){var c="places";if(b.options.libraries){if(!(b.options.libraries.indexOf("places")<0))return;c=b.options.libraries+",places"}b.configure({libraries:c})}]).directive("ionicParsePlacesAutosuggest",["$document",function(a){return{template:'<label class="item item-input item-stacked-label item-stacked-label" ng-click="placesInputOnClick()"><span class="input-label" placeholder="Enter your address">Location:</span><p>{{selectedItem.description}}</p></label>',restrict:"E",scope:{selectedItem:"=ngModel",predictionsTypes:"=?",label:"@"},link:function(b,c){b.el=c,b.tmpEl=a[0].createElement("google-places-detail-tmp")},controller:["$scope","$timeout","$ionicModal","$q","uiGmapGoogleMapApi","Parse",function(a,b,c,d,e,f){function g(a){var b=d.defer();return e.then(function(c){var d=new c.places.AutocompleteService;d.getPlacePredictions({input:a,types:["address"],componentRestrictions:{country:"au"}},function(a,d){return d!=c.places.PlacesServiceStatus.OK?void b.reject(d):void b.resolve(a)})}),b.promise}function h(a,b){var c=d.defer();return e.then(function(d){var e=new d.places.PlacesService(b);e.getDetails({placeId:a.place_id},function(b,e){e==d.places.PlacesServiceStatus.OK&&(a=angular.extend(a,b),a.geoPoint=new f.GeoPoint({latitude:a.geometry.location.k,longitude:a.geometry.location.B}),delete a.html_attributions),delete a.$$hashKey,c.resolve(a)})}),c.promise}a.predictions=[],c.fromTemplate('<ion-modal-view><div class="bar bar-header item-input-inset"><label class="item-input-wrapper"><i class="icon ion-ios7-search placeholder-icon"></i><input type="search" placeholder="Enter Address" ng-model="query" name="addressText" ng-keydown="enterAddressOnKeydown(query)"></label><button class="button button-clear" ng-click="closeIconOnClick()">Cancel</button></div><ion-content><ion-list><ion-item ng-repeat="prediction in predictions track by $index" ng-click="predictionOnClick(prediction)"> {{prediction.description}}</ion-item></ion-list></ion-content></ion-modal-view>',{scope:a,animation:"slide-in-up"}).then(function(b){a.modal=b}),a.placesInputOnClick=function(){a.modal.show()},a.closeIconOnClick=function(){a.modal.hide()},a.enterAddressOnKeydown=function(b){b&&b.length>3&&g(b).then(function(b){a.predictions=b})},a.predictionOnClick=function(b){h(b,a.tmpEl).then(function(b){a.ngModel=b,a.closeIconOnClick()})}}]}}]),angular.module("tm.ionic-parse-places-autosuggest",["uiGmapgoogle-maps","tm.parse","ionic"]).config(["$provide","uiGmapGoogleMapApiProvider",function(a,b){var c="places";if(b.options.libraries){if(!(b.options.libraries.indexOf("places")<0))return;c=b.options.libraries+",places"}b.configure({libraries:c})}]).directive("ionicParsePlacesAutosuggest",["$document",function(a){return{template:'<label class="item item-input item-stacked-label item-stacked-label" ng-click="placesInputOnClick()"><span class="input-label" placeholder="Enter your address">Location:</span><p>{{selectedItem.description}}</p></label>',restrict:"E",scope:{selectedItem:"=ngModel",predictionsTypes:"=?",label:"@"},link:function(b,c){b.el=c,b.tmpEl=a[0].createElement("google-places-detail-tmp")},controller:["$scope","$timeout","$ionicModal","$q","uiGmapGoogleMapApi","Parse",function(a,b,c,d,e,f){function g(a){var b=d.defer();return e.then(function(c){var d=new c.places.AutocompleteService;d.getPlacePredictions({input:a,types:["address"],componentRestrictions:{country:"au"}},function(a,d){return d!=c.places.PlacesServiceStatus.OK?void b.reject(d):void b.resolve(a)})}),b.promise}function h(a,b){var c=d.defer();return e.then(function(d){var e=new d.places.PlacesService(b);e.getDetails({placeId:a.place_id},function(b,e){e==d.places.PlacesServiceStatus.OK&&(a=angular.extend(a,b),a.geoPoint=new f.GeoPoint({latitude:a.geometry.location.k,longitude:a.geometry.location.B}),delete a.html_attributions),delete a.$$hashKey,c.resolve(a)})}),c.promise}a.predictions=[],c.fromTemplateUrl("views/places-suggest.html",{scope:a,animation:"slide-in-up"}).then(function(b){a.modal=b}),a.placesInputOnClick=function(){a.modal.show()},a.closeIconOnClick=function(){a.modal.hide()},a.enterAddressOnKeydown=function(b){b&&b.length>3&&g(b).then(function(b){a.predictions=b})},a.predictionOnClick=function(b){h(b,a.tmpEl).then(function(b){a.ngModel=b,a.closeIconOnClick()})}}]}}]);